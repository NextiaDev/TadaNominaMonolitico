@model TadaNomina.Models.ViewModels.Nominas.ModelNominasCargadas

@{
    ViewBag.Title = "ProcesaNominaGeneral";
    Layout = "~/Views/Shared/_layoutPrincipal.cshtml";
}

@section Styles{
    <link href="~/css/principal.css" rel="stylesheet" />
}

<div id="page-head">
    <div id="page-title">
        <h1 class="page-header text-overflow">Nominas Cargadas</h1>
    </div>
    <div id="rutaPrincipal"></div>
</div>


<div id="page-content">

    <div class="panel">
        <div class="panel-heading">
            <h3 class="panel-title">Nominas Cargadas</h3>
        </div>
        <div class="panel-body">

            @using (Html.BeginForm())
            {
                @Html.AntiForgeryToken()

            <div class="form-horizontal">
                <hr />

                @Html.HiddenFor(model => model.IdPeriodoNomina)
                @Html.HiddenFor(model => model.TipoNomina)
                <div class="form-group">
                    @Html.LabelFor(model => model.Cliente, htmlAttributes: new { @class = "control-label col-md-3" })
                    <div class="col-md-2">
                        @Html.DisplayFor(model => model.Cliente, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
                    </div>
                    @Html.LabelFor(model => model.UnidadNegocio, htmlAttributes: new { @class = "control-label col-md-3" })
                    <div class="col-md-2">
                        @Html.DisplayFor(model => model.UnidadNegocio, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
                    </div>
                </div>

                <div class="form-group">
                    @Html.LabelFor(model => model.Periodo, htmlAttributes: new { @class = "control-label col-md-3" })
                    <div class="col-md-2">
                        <u> <strong> @Html.DisplayFor(model => model.Periodo, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })</strong></u>
                    </div>
                    @Html.LabelFor(model => model.TipoNomina, htmlAttributes: new { @class = "control-label col-md-3" })
                    <div class="col-md-2">
                        @Html.DisplayFor(model => model.TipoNomina, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
                    </div>
                </div>

                <div class="form-group">
                    @Html.LabelFor(model => model.FechaInicial, htmlAttributes: new { @class = "control-label col-md-3" })
                    <div class="col-md-2">
                        @Html.DisplayFor(model => model.FechaInicial, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
                    </div>
                    @Html.LabelFor(model => model.FechaFinal, htmlAttributes: new { @class = "control-label col-md-3" })
                    <div class="col-md-2">
                        @Html.DisplayFor(model => model.FechaFinal, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
                    </div>
                </div>

                <div class="form-group">
                    @Html.LabelFor(model => model.Periodicidad, htmlAttributes: new { @class = "control-label col-md-3" })
                    <div class="col-md-2">
                        @Html.DisplayFor(model => model.Periodicidad, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
                    </div>
                    @Html.LabelFor(model => model.TotalEmpleadosCargados, htmlAttributes: new { @class = "control-label col-md-3" })
                    <div class="col-md-2">
                        @Html.DisplayFor(model => model.TotalEmpleadosCargados, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
                    </div>
                </div>


                <div class="form-group">
                    @Html.LabelFor(model => model.BaseGravada, htmlAttributes: new { @class = "control-label col-md-3" })
                    <div class="col-md-2">
                        @Html.DisplayFor(model => model.BaseGravada, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
                    </div>
                    @Html.LabelFor(model => model.TotalISN, htmlAttributes: new { @class = "control-label col-md-3" })
                    <div class="col-md-2">
                        @Html.DisplayFor(model => model.TotalISN, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
                    </div>
                </div>

                <div class="form-group">
                    @Html.LabelFor(model => model.TotalSueldo, htmlAttributes: new { @class = "control-label col-md-3" })
                    <div class="col-md-2">
                        @Html.DisplayFor(model => model.TotalSueldo, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
                    </div>
                    @Html.LabelFor(model => model.TotalSubsidio, htmlAttributes: new { @class = "control-label col-md-3" })
                    <div class="col-md-2">
                        @Html.DisplayFor(model => model.TotalSubsidio, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
                    </div>
                </div>

                <div class="form-group">
                    @Html.LabelFor(model => model.TotalISR, htmlAttributes: new { @class = "control-label col-md-3" })
                    <div class="col-md-2">
                        @Html.DisplayFor(model => model.TotalISR, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
                    </div>
                    @Html.LabelFor(model => model.TotalIMSS, htmlAttributes: new { @class = "control-label col-md-3" })
                    <div class="col-md-2">
                        @Html.DisplayFor(model => model.TotalIMSS, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
                    </div>

                </div>
                <div class="form-group">
                    @Html.LabelFor(model => model.TotalPercepciones, htmlAttributes: new { @class = "control-label col-md-3" })
                    <div class="col-md-2">
                        @Html.DisplayFor(model => model.TotalPercepciones, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
                    </div>
                    @Html.LabelFor(model => model.TotalDeducciones, htmlAttributes: new { @class = "control-label col-md-3" })
                    <div class="col-md-2">
                        @Html.DisplayFor(model => model.TotalDeducciones, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
                    </div>
                </div>

                <div class="form-group">                   
                    @Html.LabelFor(model => model.Neto, htmlAttributes: new { @class = "control-label col-md-3" })
                    <div class="col-md-2">
                        @Html.DisplayFor(model => model.Neto, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
                    </div>
                </div>


                <br />
                <div class="form-group">
                    <div class="col-md-12">
                        @if (Model.Mensaje != null)
                        {
                            if (Model.validacion)
                            {
                                <div class="alert alert-info">
                                    @Model.Mensaje
                                </div>
                            }
                            else
                            {
                                <div class="alert alert-danger">
                                    @Model.Mensaje
                                </div>
                            }
                        }
                    </div>
                </div>
                <br />
                <div class="panel-footer">
                    <div class="form-group" style="text-align:right">

                        <a href="@Url.Action("Descargar",  new { Id = Model.IdPeriodoNomina })" class="btn btn-success btn-sm"><span class="fa fa-download"></span> Descargar</a>

                        @Html.ActionLink(" Carga Layout", "CargaLayoutNomina", new { pIdPeriodoNomina = Model.IdPeriodoNomina, TipoPeriodo = Model.TipoNomina }, new { @class = "btn btn-dark btn-sm _Load" })

                        <button type="button" class="btn btn-danger btn-sm" data-toggle="modal" data-target="#deleteCalculo"><span class="fa fa-trash"></span> Elminar Carga</button>

                        <a href="@Url.Action("Index","Nomina")" class="btn btn-info btn-sm _Back"><span class="fa fa-arrow-left"></span> Regresar</a>
                    </div>
                </div>
            </div>
            }
        </div>
    </div>

</div>


<div class="modal fade" id="deleteCalculo" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><i class="pci-cross pci-circle"></i></button>
                <h4 class="modal-title">Eliminar Calculo</h4>
            </div>
            <div class="modal-body">
                Esta Seguro que desea eliminar la carga para este periodo?
                <br />
                Esta acción eliminara la carga de todos los empleados.
            </div>
            <div class="modal-footer">
                <div class="form-actions no-color">
                    <button class="btn btn-default" data-dismiss="modal" type="button">Cerrar</button>
                    @Html.ActionLink("Eliminar Cálculo", "DeleteAllNomina", new { pIdPeriodoNomina = Model.IdPeriodoNomina }, new { @class = "btn btn-danger _Aceptar" })
                </div>
            </div>
        </div>
    </div>
</div>


@section Scripts{
    <script src="~/js/Core/mensajes.js"></script>    
}

